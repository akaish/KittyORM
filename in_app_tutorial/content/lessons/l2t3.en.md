---
title: "Lesson2 Tab 3: delete entity"
date: 2018-11-15T06:50:21+03:00
draft: false
layout: "lesson"
---
### Deleting entities with KittyORM
You have two ways to delete entities in KittyORM:

* Delete associated with model row by calling `KittyMapper.delete(M model)` or `KittyMapper.delete(List<M> models)` methods:
{{< highlight java "linenos=inline, linenostart=1">}}
// Initializing database instance
BasicDatabase db = new BasicDatabase(getContext());
// Getting mapper instance
RandomMapper mapper = (RandomMapper) db.getMapper(RandomModel.class);
// Getting existing model from database (assuming that 0l model exists)
RandomModel toDelete = mapper.findByIPK(0l);
// Deleting model
long rowsAffected = mapper.delete(toDelete);
{{< /highlight >}}

* Delete all rows in a table that suit provided `WHERE` clause generated with `SQLiteConditionBuilder.class`:
{{< highlight java "linenos=inline, linenostart=1">}}
// Deleting by random_int range
BasicDatabase db = new BasicDatabase(getContext());
// Getting mapper instance
RandomMapper mapper = (RandomMapper) db.getMapper(RandomModel.class);
// Creating clause for deletion
SQLiteCondition condition = new SQLiteConditionBuilder()
                .addColumn("random_int")
                .addSQLOperator(GREATER_OR_EQUAL)
                .addValue(0)
                .addSQLOperator(AND)
                .addColumn("random_int")
// Just as tip, you can pass SQLite operator as string, not only as
// SQLiteOperator enum element
                .addSQLOperator("<=") 
                .addValue(10000)
                .build();
// Deleting with generated clause
mapper.deleteWhere(condition);

// Also, you may use pass condition as SQLite string
mapper.deleteWhere("random_int >= ? AND random_int <= ?", 0, 10000)

// And, finally, in those string you may use POJO field names in #?fieldName
mapper.deleteWhere("#?randomInt >= ? AND #?randomInt <= ?", 0, 10000)
{{< /highlight >}}

### Closer look on `SQLiteConditionBuilder.class`
`SQLiteConditionBuilder.class` is a builder for generating `WHERE` clauses within KittyORM. It is really simple to use and it is designed to generate `WHERE` clauses in most natural for SQLite way: just add column names, SQLite operators and values for your clause in an order they should appear in SQLite clause. For example, clause `WHERE a_column = 'a' AND (b_column > 0 OR BETWEEN 10 AND 20)` would be generated by following code:
{{< highlight java "linenos=inline, linenostart=1">}}
SQLiteCondition condition = new SQLiteConditionBuilder()
            .addColumn("a_column")
            .addSQLOperator(EQUAL)
            .addValue("a")
            .addSQLOperator(AND)
            .addSQLOperator(OPEN_SUBC)
            .addColumn("b_column")
            .addSQLOperator(GREATER_THAN)
            .addValue(0)
            .addSQLOperator(OR)
            .addSQLOperator(BETWEEN)
            .addValue(10)
            .addSQLOperator(AND)
            .addValue(20)
            .addSQLOperator(CLOSE_SUBC)
            .build();

// Note that following condition is equal to previous one
SQLiteCondition condition2 = new SQLiteConditionBuilder()
            .addColumn("a_column")
            .addSQLOperator("=")
            .addValue("a")
            .addSQLOperator("AND")
            .addSQLOperator("(")
            .addColumn("b_column")
            .addSQLOperator(">=")
            .addValue(0)
            .addSQLOperator("OR")
            .addSQLOperator("BETWEEN")
            .addValue(10)
            .addSQLOperator("AND")
            .addValue(20)
            .addSQLOperator(")")
            .build();

// And, finally, you can pass to condition builder not only column names but POJO field names as well
SQLiteCondition condition3 = new SQLiteConditionBuilder()
            .addField("aColumn", SomeModel.class)
            .addSQLOperator("=")
            .addValue("a")
            .addSQLOperator("AND")
            .addSQLOperator("(")
            .addField("bColumn", SomeModel.class)
            .addSQLOperator(">=")
            .addValue(0)
            .addSQLOperator("OR")
            .addSQLOperator("BETWEEN")
            .addValue(10)
            .addSQLOperator("AND")
            .addValue(20)
            .addSQLOperator(")")
            .build();

// Also, if you would like use SQLite string to build condition, you may use following method:
SQLiteCondition condition4 = SQLiteConditionBuilder.fromSQL("WHERE a_column = ? AND (b_column > ? OR BETWEEN ? AND ?)", SomeModel.class, "a", 0, 10, 20);

// And, for SQLite string, you may pass POJO field names as well using #?fieldName syntax
SQLiteCondition condition5 = SQLiteConditionBuilder.fromSQL("WHERE #?aColumn = ? AND (#?bColumn > ? OR BETWEEN ? AND ?)", SomeModel.class, "a", 0, 10, 20);

{{< /highlight >}}
All supported by KittyORM SQLite operators presented at `net.akaish.kitty.orm.query.conditions.SQLiteOperator` enumeration.

This page is a part of KittyORM project (KittyORM Documentation) and licensed under a Creative Commons Attribution-ShareAlike 4.0 International License. To view a copy of this license, visit http://creativecommons.org/licenses/by-sa/4.0/ or send a letter to Creative Commons, PO Box 1866, Mountain View, CA 94042, US., more information at https://akaish.github.io/KittyORMPages/license/
